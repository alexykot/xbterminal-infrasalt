#!yaml|gpg

postfix:
  config:
    relay:
      host: 'email-smtp.eu-west-1.amazonaws.com'
      port: 587
      user: 'AKIAIXYP2NTNKUWPFNPQ'
      password: |
        -----BEGIN PGP MESSAGE-----
        Version: GnuPG v2

        hQEMA/XI2iCydQqJAQf+N6MtnY9uXP6mkocdlRw+ygdnHfWddxfLs3l+xreJ6GNd
        Dnp5sYKN54AXfq1ZwqON3Anpv9ituJPM+2fhNEStcL32YGPf6eKYxnXWx/QEYygj
        tGxueIzSeySXrbabuoGdZ6xp1eL19MSw7wc3T+gKMEx1DCFkonZy58jLvbEP5Mw+
        VA9XTP3CQUWHfapZtcXc3H7Z1OuREzdNK6qZH1u8Y0/qoIsjxtsxaskLNHwFoA5L
        xGdWzzdv0ickMnx0x1magr2LeRH9Skm7tagiKeOSxkAAVzO3qGfAL9LGtwdAVPnp
        6akV8KlZFdrEKvYf6Omv9IICGTImEa7qt1leYXQOxNJnAecgaP0GJo6WiRvSFb2u
        hq92rtELZO0oaIpGEspxp6jPlOZrTt7VrAminLLwMnX/GVwKRFU3omOoqsg5RW5u
        AQNZWIxgkYCWPv2oMDGWEvNFTXNoZvYhDqwgMp5cfQj4iLVoBGKYPQ==
        =HMwL
        -----END PGP MESSAGE-----


sentry:
  key : |
    -----BEGIN PGP MESSAGE-----

    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
    =wQ4A
    -----END PGP MESSAGE-----

  crt: |
    -----BEGIN CERTIFICATE-----
    MIID8jCCAtqgAwIBAgIUavxpvj713LrMBIw1ga+IjdIW64EwDQYJKoZIhvcNAQEL
    BQAwVzELMAkGA1UEBhMCR0IxDjAMBgNVBAoTBVhCVEhRMQ8wDQYDVQQHEwZMb25k
    b24xDzANBgNVBAgTBkxvbmRvbjEWMBQGA1UEAxMNWEJUSFEgcm9vdCBDQTAeFw0x
    NzA1MjgxMjUzMDBaFw0xODA1MjgxMjUzMDBaMFcxCzAJBgNVBAYTAkdCMQ4wDAYD
    VQQKEwVYQlRIUTEPMA0GA1UEBxMGTG9uZG9uMQ8wDQYDVQQIEwZMb25kb24xFjAU
    BgNVBAMTDSoueGJ0aHEuY28udWswggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEK
    AoIBAQCowdIFoGcOIsizL4Td+z5tsm4FYNhug25U62o0cz2yTXqxVqNbAjOhY4vq
    /R+JvhMUz6wLNx0C0O/if7CvDjep02eWvTBacccmqHmChpyyG/+FQZvblmFMrlS5
    JOgDcgZrMHyOBfOiVLNSX7pR1EwPBU1aT693M/NEVlmfsbWXvFaBuq/tLEvCeJb9
    4m6q3TfCwk1vzzoxR/nKaYZMQI7ciQn1JyxF7sPIuVYA9qxJqtiVJPU+3bum7O7T
    h4v4Kz/5/NLpOqnkDBNd/cGTI1iMcT3DJ4zyjvuC/iVLWOtjwSE9LN8OrTOs3j1Y
    DcMoTkMsu6aAI4isF6/kYjhDknbHAgMBAAGjgbUwgbIwDgYDVR0PAQH/BAQDAgWg
    MBMGA1UdJQQMMAoGCCsGAQUFBwMBMAwGA1UdEwEB/wQCMAAwHQYDVR0OBBYEFNHg
    r+3VWJnexzAfjeZIJnM0P+66MB8GA1UdIwQYMBaAFAgB9Xo+wfux24pkMgfCKi2o
    wAQgMD0GA1UdEQQ2MDSCDSoueGJ0aHEuY28udWuCC3hidGhxLmNvLnVrggsqLnhi
    dGhxLmludIIJeGJ0aHEuaW50MA0GCSqGSIb3DQEBCwUAA4IBAQCxlKUIxu6zXNdu
    m4X6N6nWr8MurICJ0clo5n63tuJZhenDTifup1qVdHKFOFTHVY6RoPbC1EPO48RN
    4w3Icd035e+4Z/ymjpPwYZKW377MiyvWgBTQz+DMiAgYkfy5lCtEOMs1K4hbf6R+
    GQ71nbW+MLFgfMdRzIWUp9nSmrbupbnpvoXWmuFlNJa0AVCXFuScXyKZlCP87f+D
    Xko+N83br6w/+Yz5gV9NQPs0LuUt8O9mwF9GzYZXyTXBmIpCaFklhVwBejhXVrNX
    ShCkPmUNTcSBkpS0QI4LZtYPm/ocEqmeFKRqIUG7ObHSIwe9URDzFTEIQQzAnYRX
    BRcS/Tqn
    -----END CERTIFICATE-----

  config:
    DATABASES:
      default:
        ENGINE: 'sentry.db.postgres'
        NAME: 'sentrydb'
        USER: 'sentry_usr'
        PASSWORD: |
          -----BEGIN PGP MESSAGE-----
          Version: GnuPG v2

          hQEMA/XI2iCydQqJAQgAz+M1lKi4tdUmCVUJ1jeioDThuKr9kZ3RC3CA3OzsDcFD
          Uo29dU84A6aJ89JBmT8FK8Vf34lJsIfBy1H9sgKTyuwD8NXlKuMFNYJCVFkzfEL/
          IhrKdqMQu4skzWyXgeI4f6k2yeYwJ27VkkFvWeeK8rdo84B05dj9WYY4LI4tFdQj
          IdhlLA+Ata1OKHvi0SSYK9xzq2+2kdvneJLwRw+csrM4DMLsJ2aZVX1yRK6Li0jc
          I/NJYR4StIVfW6O56HnyNxfZjmXQbBIjZ0HvxklvPpmte2fLcxOzE22BQfMNTeY8
          V+WBWu9+WZYLYaL45z4YjFDvK15O6N4M0N0Wosa06dJNAXlfOw6+TpgYuK3ysUuq
          JcqEkiDZIQ13sIpaMiooEObYrKv9DkVrbABlJxyYpHkD/zsmw4OlGWFMtCcidmMj
          iyF3tEodTlOxG8y/gjg=
          =XH3Y
          -----END PGP MESSAGE-----

        HOST: '127.0.0.1'
        PORT: 5432
    yml:
      mail.backend: django.core.mail.backends.smtp.EmailBackend
      mail.from: 'sentry@xbthq.co.uk'
      mail.host: '127.0.0.1'
      mail.port: 25
      system.secret-key: |
        -----BEGIN PGP MESSAGE-----
        Version: GnuPG v2

        hQEMA/XI2iCydQqJAQgAgxNPhwLUAqADGmRsaT3N9wXnYwBvN5222WZnx4/9ryfp
        4roixvkyFiG6sSLUL1YmxFD+tbKq7pj9bmKy7QPEDCH80bwAnxpmBDKXFH5Bw1/W
        F5E8r0G2RHS/ZzkjRVo/QA8wjCmXC6JsEiZZG9KY94nguaBiajDqzb/4v1CQ05zq
        y6Kz4qFmGHZcGJtLnrWCvYNO0+wpaYwtS0/dwh3qU6VBCvi5xk+uyrhNp7U32nKT
        MYp1mTSrkWP5s6ak5UwkIcMufEzG6WbbqgKElpv4DtTkEEmn4B4NIYJYBbrJGhaM
        aMCpgzRw8LepBz0SRyHWG8glvye26i2Wdw+wcaCgT9JtAXK3ia8lbayXLBzLV8u8
        0O3/D2vgkc1YbZ/mpFD4khQX7dgogNTB2+wkcUw0OlUy5EYfSH4J3+ldtPkXBMyd
        sPyqlUKsm/ysTXGTxyomV8gT2Qeuof1RV3MlIblUD8lGigdjFmG8QmlpH/TL+w==
        =XcJC
        -----END PGP MESSAGE-----

      redis.clusters:
        default:
          hosts:
            0:
              host: 127.0.0.1
              port: 6379
              db: 4

database:
  datadisk:
    dev: '/dev/xvdh'
    dir: '/var/lib/postgresql/'

postgres:
  pg_hba.conf: salt://postgres/pg_hba.conf
  commands:
    initdb: '/usr/lib/postgresql/9.5/bin/initdb -D '

  use_upstream_repo: True
  init_db: True

  lookup:
    pkg: 'postgresql-9.5'
    pkg_client: 'postgresql-client-9.5'
    pkgs_extra:
      - postgresql-contrib
      - postgresql-plpython-9.5
    pg_hba: '/etc/postgresql/9.5/main/main/pg_hba.conf'
    data_dir: '/var/lib/postgresql/9.5/main/'
    conf_dir: '/etc/postgresql/9.5/main/'
    #service: postgresql@9.5-main

  users:
    sentry_usr:
      ensure: present
      password: |
        -----BEGIN PGP MESSAGE-----
        Version: GnuPG v2

        hQEMA/XI2iCydQqJAQf8CkHT6xid8UUmjgMMyIu6swtKjGPpJ8D26s86CEpTXGxJ
        ODh5VHiJEMAHGVzSJGXhp2paPEknO0D5Pc0r3WxGNGo3znIOadus6zkdiz6DQKYt
        KRIbLMx19fEJeU0bV8zfYTAOSrn6x/D+1ysTYSLPjzgRwHMnEFEW+vGJO8X6y7xr
        7QNhqCsyrSbvh78EKl2urjzfcMPG8qmDqzksBWFqIFMc/qBwODDDjuGDTNWbcHZB
        T9U5fadH1ezhJE1FcBO8xakhjelTr3IHsYdggLWytvQue1yl3RAsSmd/iul1yqQa
        44VtkDIZPKpjZ/tBQNNuN0OAsbScX98ZuCu9sJxvnNJNAdBIo5sPhP2BxXQaj9cW
        +1MqJo2FYSTRpknXN59/yhwEO4QDOZ1w+uFc4N7LRbClUqzPagzRgGg+zVM0eIvG
        AOcpRDAqGIERGDGuZPA=
        =BJV8
        -----END PGP MESSAGE-----

      createdb: False
      createroles: False
      createuser: False
      inherit: True
      replication: False

  # This section cover this ACL management of the pg_hba.conf file.
  # <type>, <database>, <user>, [host], <method>
  acls:
    - ['host', 'sentrydb', 'sentry_usr', '127.0.0.1/32', 'md5']
    - ['local', 'replication', 'postgres',  'peer']

  databases:
    sentrydb:
      owner: 'sentry_usr'
      user: 'sentry_usr'
      template: 'template0'
      lc_ctype: 'en_US.UTF-8'
      lc_collate: 'en_US.UTF-8'
      # optional extensions to enable on database
      extensions:
        uuid-ossp:
  postgresconf: |
    listen_addresses = '*'
    port = 5432
    max_connections = 100
    default_statistics_target = 100
    checkpoint_completion_target = 0.9
    min_wal_size = 10485760
    max_wal_size = 268435456
    dynamic_shared_memory_type = posix
    effective_cache_size = 1000MB
    maintenance_work_mem = 128MB
    shared_buffers = 512MB
    wal_buffers = 16MB
    wal_level = hot_standby
    work_mem = 5MB
    max_wal_senders = 4
    timezone = 'localtime'
    datestyle = 'iso, mdy'
    default_text_search_config = 'pg_catalog.english'
    lc_messages = 'en_US.UTF-8'
    lc_monetary = 'en_US.UTF-8'
    lc_numeric = 'en_US.UTF-8'
    lc_time = 'en_US.UTF-8'
    log_line_prefix = '%t [%p-%l] %q%u@%d '
    log_timezone = 'localtime'
