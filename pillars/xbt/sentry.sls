#!yaml|gpg

postfix:
  config:
    relay:
      host: 'email-smtp.eu-west-1.amazonaws.com'
      port: 587
      user: 'AKIAIXYP2NTNKUWPFNPQ'
      password: |
        -----BEGIN PGP MESSAGE-----
        Version: GnuPG v2

        hQEMA/XI2iCydQqJAQf+N6MtnY9uXP6mkocdlRw+ygdnHfWddxfLs3l+xreJ6GNd
        Dnp5sYKN54AXfq1ZwqON3Anpv9ituJPM+2fhNEStcL32YGPf6eKYxnXWx/QEYygj
        tGxueIzSeySXrbabuoGdZ6xp1eL19MSw7wc3T+gKMEx1DCFkonZy58jLvbEP5Mw+
        VA9XTP3CQUWHfapZtcXc3H7Z1OuREzdNK6qZH1u8Y0/qoIsjxtsxaskLNHwFoA5L
        xGdWzzdv0ickMnx0x1magr2LeRH9Skm7tagiKeOSxkAAVzO3qGfAL9LGtwdAVPnp
        6akV8KlZFdrEKvYf6Omv9IICGTImEa7qt1leYXQOxNJnAecgaP0GJo6WiRvSFb2u
        hq92rtELZO0oaIpGEspxp6jPlOZrTt7VrAminLLwMnX/GVwKRFU3omOoqsg5RW5u
        AQNZWIxgkYCWPv2oMDGWEvNFTXNoZvYhDqwgMp5cfQj4iLVoBGKYPQ==
        =HMwL
        -----END PGP MESSAGE-----


sentry:
  key : |
    -----BEGIN PGP MESSAGE-----
    Version: GnuPG v2

    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
    KTQ=
    =EpQO
    -----END PGP MESSAGE-----

  crt: |
    -----BEGIN PGP MESSAGE-----
    Version: GnuPG v2

    hQEMA/XI2iCydQqJAQf7BOtBW7h8IMb7cA7X8kkCEJQy4FPXrBzLzaG8qFno1LNA
    Upd16/PiXhqfhpFBvc4sHhSUz7LXwZLFbPfVvTzAQ8w5jKU54JwGD4H9GwQHlF/a
    oJWBkfB4B+eOeb0BB/W/r8EPybQXC8RrwWYaarxwAVw4pNimnzQmXKhK1Hryvdi5
    fleaknR48g8EtWQsp5xyEdpuP9Z8AxFMgp+hD1KIwtUH7/ZIft6I8qIroXul7Av6
    U0QvAQz/28vmJdXSmdkDXHt9fPHwvuOvZtZaJQVd+JrgBplGvW+6fIS1zzByAdeG
    g9DcqfLRVhUdUbKb6zdYdb5Cwmf6YQxEW0p7xZlDM9LqAX/n6YOw4YawsEvtRrqx
    cG6ug622Bjpssg7jzHlx4lalwHbTnuqxQkCtlytA2zxjTsf7bc1oNx2BepGvE6M/
    DpAVOeePnCui645N90t1jGBYdZKjvmAhCQd5GeEX/ImzFSUVB/42HCxOZZO9phof
    qLCQQ4vd+UQi0osYfX0aVIiqaPvNypPVNPEJmNYMMoVdHuiQhmdBsUumjtDtA4TR
    UF623JNeWanHiIPEP3dP96rN7iqprk4g+FsYJWJ+rrCu3GoBraInGO0YoUHJsWkI
    SvDJ8DVpP8KfRVLDO0X5KHEknBqeysZbGD5GDcnFItTBbOhjd4c1gwAzH7uL/WGu
    Hp5a1EVR8/mIFlL0UhOsipIP3gETYtnMcgZMfmb9mlkKBaCnckC7/MEV2H85GSfv
    p7TK+lNBCA/ePn0lINF3SXdM48TaYfxFbX90x79rhQZbmcs9PAa6O93clczg0JV+
    mUshuR0tEzrKApzhEiaqtQkH5fGZEyabcyCbwypJYGmxVDSFwTTj4EoA+TCpP5Vh
    gmv6ZLM4xgWZevH9aaFl4AKpu9ooNI613+Emd3zxwV8kb8MpQit7DC34aHbqaHVy
    CbMIn7IPhdhK+Sfin4vtkizZ6gB3BD8rX62Tfa20bDc8MT40C4hnjvqcO18RfbWj
    Yao1sXbqbZQh1Z7EoaxefhFhl1D/SQhe0Gq9hGx7cIhsatUSt4kWGbGMa2eNTNDx
    DT+HRJ9fA7p+URp+filAs1wk1sVc2p5Qqyj2s8bm95vFIt4a47nx91gUjt9RJVzA
    lvQkq7dP4diXjAQzlJLk4G2PZl6Jgd5cVVhd+BdiOULRgt/NAEdQwjA2oQyxqmgV
    H3aI3aTZTTxAf/ur56J/eYU7n/M2MrPcPc/MlnTRLtU1mH9BDxLXyOwq04JuFtmt
    OM7/CigVk/vgPhGAzL+hLklNpddga9yEtvMHrgnk9OBoso/3FbhJAteKmpDb3auq
    Mhb8JIKl1E57M8FR8MA14CZbDCppufpmiIEgwAsVSdICLvfJSpAqDOMhtLG4AIdP
    JVDRLBFF8CnJGpfzBLKhC0zWPIHqnVn1+suSQEThEXe7Fd0XMgg1XoOxlB5a0pOI
    1XKC9YfB6IPZlvPIxdXIp3ZqpoGOTPBpaM1j7hg3Sk0lw7KlMAQK+d+EYrU+Jmxl
    UPWruvoYIptQvzegnDqX78EdE0onwbpXI7vslhg7YbWyMnLmxHqR0t5l43wD81Tu
    p6WSWNxNjDtRUJsmXkZHYVAaLDNBJyRmEe3OJYyt6ppyjCbNPsMqKvUji2n43h9p
    FqID84XTbcZr4r4favq0tOGN+keevuNSKFfz+6sPmIFX7oqz/F+0oSEc0AUb8+6h
    pUtkP71ZlJUYOCgkQ4aAiCjxTwa3JvW8d95reU0BbIAYVW31lgVPPs0egM94o2fE
    dIzIciFdSmBsHEtVRmtiO2qfU5oJ0E1KKGaKPTY=
    =y5/D
    -----END PGP MESSAGE-----

  config:
    DATABASES:
      default:
        ENGINE: 'sentry.db.postgres'
        NAME: 'sentrydb'
        USER: 'sentry_usr'
        PASSWORD: |
          -----BEGIN PGP MESSAGE-----
          Version: GnuPG v2

          hQEMA/XI2iCydQqJAQgAz+M1lKi4tdUmCVUJ1jeioDThuKr9kZ3RC3CA3OzsDcFD
          Uo29dU84A6aJ89JBmT8FK8Vf34lJsIfBy1H9sgKTyuwD8NXlKuMFNYJCVFkzfEL/
          IhrKdqMQu4skzWyXgeI4f6k2yeYwJ27VkkFvWeeK8rdo84B05dj9WYY4LI4tFdQj
          IdhlLA+Ata1OKHvi0SSYK9xzq2+2kdvneJLwRw+csrM4DMLsJ2aZVX1yRK6Li0jc
          I/NJYR4StIVfW6O56HnyNxfZjmXQbBIjZ0HvxklvPpmte2fLcxOzE22BQfMNTeY8
          V+WBWu9+WZYLYaL45z4YjFDvK15O6N4M0N0Wosa06dJNAXlfOw6+TpgYuK3ysUuq
          JcqEkiDZIQ13sIpaMiooEObYrKv9DkVrbABlJxyYpHkD/zsmw4OlGWFMtCcidmMj
          iyF3tEodTlOxG8y/gjg=
          =XH3Y
          -----END PGP MESSAGE-----

        HOST: '127.0.0.1'
        PORT: 5432
    yml:
      mail.backend: django.core.mail.backends.smtp.EmailBackend
      mail.from: 'sentry@xbthq.co.uk'
      mail.host: '127.0.0.1'
      mail.port: 25
      system.secret-key: |
        -----BEGIN PGP MESSAGE-----
        Version: GnuPG v2

        hQEMA/XI2iCydQqJAQgAgxNPhwLUAqADGmRsaT3N9wXnYwBvN5222WZnx4/9ryfp
        4roixvkyFiG6sSLUL1YmxFD+tbKq7pj9bmKy7QPEDCH80bwAnxpmBDKXFH5Bw1/W
        F5E8r0G2RHS/ZzkjRVo/QA8wjCmXC6JsEiZZG9KY94nguaBiajDqzb/4v1CQ05zq
        y6Kz4qFmGHZcGJtLnrWCvYNO0+wpaYwtS0/dwh3qU6VBCvi5xk+uyrhNp7U32nKT
        MYp1mTSrkWP5s6ak5UwkIcMufEzG6WbbqgKElpv4DtTkEEmn4B4NIYJYBbrJGhaM
        aMCpgzRw8LepBz0SRyHWG8glvye26i2Wdw+wcaCgT9JtAXK3ia8lbayXLBzLV8u8
        0O3/D2vgkc1YbZ/mpFD4khQX7dgogNTB2+wkcUw0OlUy5EYfSH4J3+ldtPkXBMyd
        sPyqlUKsm/ysTXGTxyomV8gT2Qeuof1RV3MlIblUD8lGigdjFmG8QmlpH/TL+w==
        =XcJC
        -----END PGP MESSAGE-----

      redis.clusters:
        default:
          hosts:
            0:
              host: 127.0.0.1
              port: 6379
              db: 4

database:
  datadisk:
    dev: '/dev/xvdh'
    dir: '/var/lib/postgresql/'

postgres:
  pg_hba.conf: salt://postgres/pg_hba.conf
  commands:
    initdb: '/usr/lib/postgresql/9.5/bin/initdb -D '

  use_upstream_repo: True
  init_db: True

  lookup:
    pkg: 'postgresql-9.5'
    pkg_client: 'postgresql-client-9.5'
    pkgs_extra:
      - postgresql-contrib
      - postgresql-plpython-9.5
    pg_hba: '/etc/postgresql/9.5/main/main/pg_hba.conf'
    data_dir: '/var/lib/postgresql/9.5/main/'
    conf_dir: '/etc/postgresql/9.5/main/'
    #service: postgresql@9.5-main

  users:
    sentry_usr:
      ensure: present
      password: |
        -----BEGIN PGP MESSAGE-----
        Version: GnuPG v2

        hQEMA/XI2iCydQqJAQf8CkHT6xid8UUmjgMMyIu6swtKjGPpJ8D26s86CEpTXGxJ
        ODh5VHiJEMAHGVzSJGXhp2paPEknO0D5Pc0r3WxGNGo3znIOadus6zkdiz6DQKYt
        KRIbLMx19fEJeU0bV8zfYTAOSrn6x/D+1ysTYSLPjzgRwHMnEFEW+vGJO8X6y7xr
        7QNhqCsyrSbvh78EKl2urjzfcMPG8qmDqzksBWFqIFMc/qBwODDDjuGDTNWbcHZB
        T9U5fadH1ezhJE1FcBO8xakhjelTr3IHsYdggLWytvQue1yl3RAsSmd/iul1yqQa
        44VtkDIZPKpjZ/tBQNNuN0OAsbScX98ZuCu9sJxvnNJNAdBIo5sPhP2BxXQaj9cW
        +1MqJo2FYSTRpknXN59/yhwEO4QDOZ1w+uFc4N7LRbClUqzPagzRgGg+zVM0eIvG
        AOcpRDAqGIERGDGuZPA=
        =BJV8
        -----END PGP MESSAGE-----
        
      createdb: False
      createroles: False
      createuser: False
      inherit: True
      replication: False

  # This section cover this ACL management of the pg_hba.conf file.
  # <type>, <database>, <user>, [host], <method>
  acls:
    - ['host', 'sentrydb', 'sentry_usr', '127.0.0.1/32', 'md5']
    - ['local', 'replication', 'postgres',  'peer']

  databases:
    sentrydb:
      owner: 'sentry_usr'
      user: 'sentry_usr'
      template: 'template0'
      lc_ctype: 'en_US.UTF-8'
      lc_collate: 'en_US.UTF-8'
      # optional extensions to enable on database
      extensions:
        uuid-ossp:
  postgresconf: |
    listen_addresses = '*'
    port = 5432
    max_connections = 100
    default_statistics_target = 100
    checkpoint_completion_target = 0.9
    min_wal_size = 10485760
    max_wal_size = 268435456
    dynamic_shared_memory_type = posix
    effective_cache_size = 1000MB
    maintenance_work_mem = 128MB
    shared_buffers = 512MB
    wal_buffers = 16MB
    wal_level = hot_standby
    work_mem = 5MB
    max_wal_senders = 4
    timezone = 'localtime'
    datestyle = 'iso, mdy'
    default_text_search_config = 'pg_catalog.english'
    lc_messages = 'en_US.UTF-8'
    lc_monetary = 'en_US.UTF-8'
    lc_numeric = 'en_US.UTF-8'
    lc_time = 'en_US.UTF-8'
    log_line_prefix = '%t [%p-%l] %q%u@%d '
    log_timezone = 'localtime'
