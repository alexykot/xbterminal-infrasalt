#!yaml|gpg

xbtsam:
  release: '2016.3'
  version: '2016.3.4+ds-1'
  api:
    domain: 'stage-sam.xbthq.co.uk'
  file_root:
    git_uri: git@bitbucket.org:xbterminal/xbterminal-salt.git
    key: |
      -----BEGIN PGP MESSAGE-----

      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
      =2CO0
      -----END PGP MESSAGE-----

    key_path: '/root/.ssh/id_rsa.salt'
    path: /srv/salt/xbterminal-salt/

  config:
    transport: tcp
    fileserver_backend:
      - git
    gitfs_provider: gitpython
    gitfs_base: master
    gitfs_remotes:
      - file:///srv/salt/xbterminal-salt/:
        - name: states
        - root: states
        - mountpoint: salt://
        - base: master

    rest_cherrypy:
      port: 8000
      host: 127.0.0.1
      disable_ssl: True
      thread_pool: 10
      collect_stats: False
      debug: True

    external_auth:
      pam:
        salt-xbt-dev:
          - pkg.*
          - test.*
          - '@wheel'
          - '@jobs'
          - 'state.*'
          - system.*
          - grains.*

    token_expire: 3600

    log_level_logfile: debug

    top_file_merging_strategy: same

    reactor:
      - 'xbt/terminal/highstate':
        - salt://_reactors/savepillars.py
      - 'salt/job/*/ret/*':
        - salt://_reactors/savejid.py

    ext_pillar:
      - mongo: {collection: xbt_pillars, id_field: _id, fields: [xbt,jid]}

    mongo.db: 'salt'
    mongo.host: '127.0.0.1'
    mongo.port: 27017

mongodb:
  use_repo: True
  version: 3.2

users:
  salt-xbt-dev:
    sudouser: False
    password: '$6$l0lMSZXN$yoiJS/CydrkOjBH8sw/mNK1o/7LQAqN2wcQHQBU08WKPhr5rSW77dNsI.M6WG6YpfozRj0UJmVX7NPQYatuX2'
    shell: /bin/sh

nginx:
  config:
    client: True
    ssl:
      domain: 'xbthq.co.uk'
      key: |
        -----BEGIN RSA PRIVATE KEY-----
        MIIEogIBAAKCAQEA7k1xbhRyKecHf4gJxH9OmxLmRVaz/fowHGaag7bphNyPOE7Y
        CZ1Zi2RJeszQtJCBu8ISCEmEhby5dC+UWka2gHrg4N12WLVcU+B/DmApWWG3Q2Ek
        wGFHgeBtmsybyX6+lE/kyFRd5hyHcT5JjXbXehILJ9CfnBjeUiX7ca4FnkgzC0pq
        385HBierPfhIyqAe/oIMq8pfa3DVBswAGMMKPUY1e/ALwQbqH+aODeNcVVCUCj/f
        pE+sZc8aMqdSGmjAxvzjjUdciDWWOS7FBeV+PwQjqpQxiDN0CpbNBsENuzP0NLrA
        zZILgGCQBlwlrhFKE3XYRlM0iE8hrZNuFwkMyQIDAQABAoIBAFv4HXfbgjfzxuwM
        R6DDdUXaJG7MSIkTnq/HVYjR9gvlx4x2uV/0j1OBr+4pz75wKvGYs7bpELFApd5W
        Yo34zoSFZ/bA4eTYkbp5YO/eYvbxBHaHrlRk9uEECaj9oH5CYTECKIy8KsUda5Rj
        8qUbIYwmHJIQLRlka6EOsZ0tCVQNUJQZxjKARIlSXxeEmhWvNtemumK0Dh6uwRZr
        ZiNcPB8Wt6N5E/d3mzXbvzuocJtpI500mp9KBi5SzcEEui0Vfa1RjP7qgSq3Bmsm
        zYWQ9UqNQY3YSv+CVOSTgWaaSYXj2kCuLR+ytMWYLJVdiOQTqEFpozLo1KrO0UP+
        gVMWJbUCgYEA8BaRQsXw3Ul6HGjwEH/iYWOMg9EiEgY4kQRDYVCrcn1nSfpT+Pyu
        bEwswlj5rdPGKWpXUBpqeelkhBim95pETmDpgYRXqp1q5UouDcRdNcxs48XxFCEw
        rPkRFb9uUiX4ohOXxb57lKf/7fmeU7oE2cBQ2HjEnBhbi5a5ikRVQ+MCgYEA/hiU
        abxB9/JP4/lr62MHileGVKTJeMxrKxwLdCHvk/2+kI286aiWSSkrvcP03PRcM7kJ
        oQT0X+B5+FTSa7V0fThtDh+8FdKzcOTUHT7Qoc3ZiI2vmzFf1Fk/nZG37M0onXUb
        /7nl2LSuD0thqZKs5lRHegDAKgRJF0fKUe1yxGMCgYAhg0TriS3B9cuxw4QfCXrU
        FU076SlUUsH6nBm7r8L+zDpqvSKTktHWFBv7VOglN3ZluY5OhCFwuv9o4PgNf98h
        Aa4Wgh6qliahsuUSzuIj7FEWyj6IjMl6m5mi64G+vcYi+ZEp7Rja+0hiM4HCNikP
        LCUc0l6/WzcMGRH1Fuy/+QKBgAt1+Fu8jg0s9MWHnoKDePeYcwqmVCAKuFq9bRbT
        4QZ/z3SdsAOqAv1RyhNJH2ZH71C16+VDX/JjIZ091i/dg1+Sh/i3HbiuREG3UInx
        J1/k9QbfvSf21iexztjAldcsecSAX77tF5zqqV8vOzx2zS2mZ4LtPb2na9SM/Gct
        mpuZAoGAU/ai7gXPVITukhK5h53Yatx+szw+cKBCqVegxxulOTAg02C0DBMGLwA9
        HYLRolMUiXkQRD0XXbe5gVC8TcJNk80VkyuGFv4GLz9tac6e4/XXZnXmdF29mQxA
        1SyrHzEQynt6QYxu8YUCcMV6+eVU+l56KA5Gl8BkfleAfEhzKjo=
        -----END RSA PRIVATE KEY-----
      crt: |
        -----BEGIN CERTIFICATE-----
        MIID8jCCAtqgAwIBAgIUeQ0KoBhBu4cqy7jq6j0LuCUCDp0wDQYJKoZIhvcNAQEL
        BQAwVzELMAkGA1UEBhMCR0IxDjAMBgNVBAoTBVhCVEhRMQ8wDQYDVQQHEwZMb25k
        b24xDzANBgNVBAgTBkxvbmRvbjEWMBQGA1UEAxMNWEJUSFEgcm9vdCBDQTAeFw0x
        NjA1MjYxOTU3MDBaFw0xNzA1MjYxOTU3MDBaMFcxCzAJBgNVBAYTAkdCMQ4wDAYD
        VQQKEwVYQlRIUTEPMA0GA1UEBxMGTG9uZG9uMQ8wDQYDVQQIEwZMb25kb24xFjAU
        BgNVBAMTDSoueGJ0aHEuY28udWswggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEK
        AoIBAQDuTXFuFHIp5wd/iAnEf06bEuZFVrP9+jAcZpqDtumE3I84TtgJnVmLZEl6
        zNC0kIG7whIISYSFvLl0L5RaRraAeuDg3XZYtVxT4H8OYClZYbdDYSTAYUeB4G2a
        zJvJfr6UT+TIVF3mHIdxPkmNdtd6Egsn0J+cGN5SJftxrgWeSDMLSmrfzkcGJ6s9
        +EjKoB7+ggyryl9rcNUGzAAYwwo9RjV78AvBBuof5o4N41xVUJQKP9+kT6xlzxoy
        p1IaaMDG/OONR1yINZY5LsUF5X4/BCOqlDGIM3QKls0GwQ27M/Q0usDNkguAYJAG
        XCWuEUoTddhGUzSITyGtk24XCQzJAgMBAAGjgbUwgbIwDgYDVR0PAQH/BAQDAgWg
        MBMGA1UdJQQMMAoGCCsGAQUFBwMBMAwGA1UdEwEB/wQCMAAwHQYDVR0OBBYEFPog
        A2FzrbflGHqGfjtFkZYsg7q+MB8GA1UdIwQYMBaAFAgB9Xo+wfux24pkMgfCKi2o
        wAQgMD0GA1UdEQQ2MDSCDSoueGJ0aHEuY28udWuCC3hidGhxLmNvLnVrggsqLnhi
        dGhxLmludIIJeGJ0aHEuaW50MA0GCSqGSIb3DQEBCwUAA4IBAQCCRRF4I3zraRQM
        PslFCZv6cEO7qdmXtVCe2dit8qoIqDIp55mnYxhEJslgk6+RKex4amwbSUwCLmF/
        IFEmLaQqqv9bUdjHM38Vnn1Jzsww+qX2OgNb4MX8veF0+/iTSwlfB91xGOsdaKCL
        xnfkg3ho0tSK5HyADNvhVAvICccJQHNfu9os3WzzS18rIl/oEwpq1ABBs2+mMWfx
        avY5dR+wRSvG7AkDQbxFsauhyh60Whot7IElDr+BpY1Xlg5Em4eakh9wWlomzM7g
        yx3tgApIThz1eyeIaB5l0Jzv8LOnGtDbZ1imls2n8ZYwbQQmbcXfsvbGdFGLbMsx
        7aFznTup
        -----END CERTIFICATE-----
